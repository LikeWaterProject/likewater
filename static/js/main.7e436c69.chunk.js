(this.webpackJsonplikewater=this.webpackJsonplikewater||[]).push([[0],{184:function(e,t,n){e.exports=n.p+"static/media/pushpin-2-fill.ee14c364.svg"},185:function(e,t,n){e.exports=n.p+"static/media/alarm-warning-fill.672b5640.svg"},186:function(e,t,n){e.exports=n.p+"static/media/fire-fill.3ef6087f.svg"},187:function(e,t,n){e.exports=n.p+"static/media/first-aid-kit-fill.df4d90db.svg"},188:function(e,t,n){e.exports=n.p+"static/media/broadcast-fill.9172578d.svg"},189:function(e,t,n){e.exports=n.p+"static/media/focus-3-line.54eac840.svg"},213:function(e,t,n){e.exports=n(388)},224:function(e,t,n){},388:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(28),o=n.n(i),c=n(52),l=n(60),s=(n(222),n(223),n(224),n(63)),u=n(15),m=n(396),d=n(400),p=n(401),v=n(399),f=n(19),b=function(e){e.preventDefault&&e.preventDefault()},g=n(33),h=(n(43),n(82),n(83),n(184)),E=n.n(h),y=n(185),k=n.n(y),O=n(186),w=n.n(O),j=n(187),x=n.n(j),M=n(188),_=n.n(M),I=n(189),S=n.n(I),C=Object(f.d)({accessToken:"pk.eyJ1IjoicmVrdGRlY2thcmQiLCJhIjoiY2theWJ4OXM0MGhiejJ3cnkzcmk0andiYyJ9.IinlG0vyUvcWhvlAREJXeA"}),D=new Image(24,24);D.src=E.a;var P=new Image(24,24);P.src=k.a;var J=new Image(24,24);J.src=w.a;var L=new Image(24,24);L.src=x.a;var R=new Image(24,24);R.src=_.a;var T=new Image(24,24);T.src=S.a;var z,B={defaultZoom:[10],volumetricPainter:{"fill-extrusion-color":"#424d5c","fill-extrusion-height":{type:"identity",property:"height"},"fill-extrusion-base":{type:"identity",property:"min_height"},"fill-extrusion-opacity":.6}},A=[{eventId:"3A4221E1-9AD7-4296-863D-3B8F56E092C7",eventType:"Riots",userToken:"123423",eventDesc:"Example Riot Event",coordinates:{lat:40.73663,lon:-73.99973},reportedDt:"12345",confirms:0,dismisses:0}],N=Object(c.b)((function(e){return{preferences:e.preferences,marker:e.map.marker}}),{setMarkerPosition:function(e){return{type:"set_marker_position",payload:e}}})((function(e){var t=e.center,n=e.onMoveEnd,i=e.toggleControls,o=e.preferences,c=e.marker,l=e.setMarkerPosition,s=Object(u.f)(),m=Object(v.a)(),d=m.width,p=m.height,g=o.showVolumetricBuildings,h=(o.showBasicMapFeatures,function(e,t){e.map.getCanvas().style.cursor=t}),E=Object(a.useCallback)((function(e){var t=e.map,n=e.feature.properties,a=n.eventId,r=n.coordinates;e.originalEvent.preventDefault();var o=JSON.parse(r),c=o.lon,l=o.lat;t.flyTo({center:[c,l],zoom:16}),i(!0),s.push("/events/".concat(a))}),[s,i]),y=Object(a.useMemo)((function(){return{onMouseEnter:function(e){return h(e,"pointer")},onMouseLeave:function(e){return h(e,"")},onClick:E}}),[E]),k=function(e,t){console.log(e,t);var n=t.lngLat,a=n.lat,r=n.lng;i(!0),l([r,a]),s.push("/submit")},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isPreventDefault,r=void 0===n||n,i=t.delay,o=void 0===i?300:i,c=Object(a.useRef)(),l=Object(a.useRef)(),s=Object(a.useCallback)((function(t,n){var a=n.originalEvent;r&&a.target&&(a.target.addEventListener("touchend",b,{passive:!0}),l.current=a.target),c.current=setTimeout((function(){t.isMoving()||t.isRotating()||t.isZooming()||e(t,n)}),o)}),[e,o]),u=Object(a.useCallback)((function(){c.current&&clearTimeout(c.current),r&&l.current&&l.current.removeEventListener("touchend",b)}),[]);return{onMouseDown:function(e,t){return s(e,t)},onTouchStart:function(e,t){return s(e,t)},onMouseUp:u,onMouseLeave:u,onTouchEnd:u}}(k,{isPreventDefault:!0,delay:300});return r.a.createElement("div",{style:{width:d,height:p}},r.a.createElement(C,Object.assign({style:"mapbox://styles/rektdeckard/ckayd52rb0xzg1imcbyek0g4y",center:t,zoom:B.defaultZoom,containerStyle:{height:"100%",width:"100%"},onStyleLoad:function(e,t){console.log(t),e.on("click",(function(e){e.originalEvent.defaultPrevented||(i(),s.push("/"))}))},onMoveEnd:function(e,t){var a,r;null===(a=t.originalEvent)||void 0===a||null===(r=a.preventDefault)||void 0===r||r.call(a),n(e)},onContextMenu:k},O),r.a.createElement(f.b,{id:"police",data:P}),r.a.createElement(f.b,{id:"pin",data:D}),r.a.createElement(f.b,{id:"fire",data:J}),r.a.createElement(f.b,{id:"medical",data:L}),r.a.createElement(f.b,{id:"info",data:R}),r.a.createElement(f.b,{id:"position",data:T}),g&&r.a.createElement(f.c,{id:"3d-buildings",type:"fill-extrusion",sourceId:"composite",sourceLayer:"building",filter:["==","extrude","true"],minZoom:14,paint:B.volumetricPainter}),c&&r.a.createElement(f.c,{id:"map-marker",type:"symbol",layout:{"icon-image":"pin","icon-anchor":"bottom","icon-allow-overlap":!0}},r.a.createElement(f.a,{coordinates:c})),r.a.createElement(f.c,{id:"event-markers",type:"symbol",layout:{"icon-image":"info","icon-allow-overlap":!0}},A.map((function(e){var t=e.eventId,n=e.coordinates,a=n.lon,i=n.lat;return r.a.createElement(f.a,Object.assign({key:t,coordinates:[a,i],properties:e},y))}))),r.a.createElement(f.c,{id:"location-marker",type:"symbol",layout:{"icon-image":"position","icon-allow-overlap":!0}},r.a.createElement(f.a,{coordinates:t,properties:{coordinates:t}}))))})),F=n(402),U=n(397),V=function(e){var t=e.visible,n=Object(a.useState)(""),i=Object(s.a)(n,2),o=i[0],c=i[1];return r.a.createElement(d.a,{as:F.a,inverted:!0,raised:!0,direction:"top",animation:"push",textAlign:"center",visible:t},r.a.createElement(U.a,{value:o,onSearchChange:function(e,t){var n=t.value;return c(n)},open:!1}))},W=n(395),X=function(){return r.a.createElement(F.a,{raised:!0,inverted:!0,style:{padding:8,paddingBottom:44}},r.a.createElement("div",{style:{minHeight:200,display:"flex",alignItems:"center"}},r.a.createElement(W.a,{active:!0,inline:"centered"})))},Z=r.a.lazy((function(){return n.e(5).then(n.bind(null,406))})),G=r.a.lazy((function(){return n.e(3).then(n.bind(null,405))})),Y=r.a.lazy((function(){return n.e(4).then(n.bind(null,407))})),H=r.a.createElement(X,null),Q=Object(u.h)((function(e){var t=e.visible;return r.a.createElement(d.a,{className:"no-overflow",animation:"push",direction:"bottom",visible:t},r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/events"},r.a.createElement(a.Suspense,{fallback:H},r.a.createElement(Z,null))),r.a.createElement(u.a,{path:"/events/:id"},r.a.createElement(a.Suspense,{fallback:H},r.a.createElement(G,null))),r.a.createElement(u.a,{exact:!0,path:"/submit"},r.a.createElement(a.Suspense,{fallback:H},r.a.createElement(Y,null))),r.a.createElement(u.a,{exact:!0,path:"/report"},r.a.createElement(X,null)),r.a.createElement(u.a,{exact:!0,path:"/sos"},r.a.createElement(X,null))))})),$=Object(c.b)((function(e){return{events:e.events,preferences:e.preferences}}),{})((function(e){e.events;var t=e.preferences,n=Object(a.useState)(null),i=Object(s.a)(n,2),o=i[0],c=i[1],l=Object(m.a)({enableHighAccuracy:!1,maximumAge:15e3,timeout:3e4});Object(a.useEffect)((function(){!l.loading&&l.longitude&&c([l.longitude,l.latitude])}),[l]);var v=Object(a.useState)(!0),f=Object(s.a)(v,2),b=f[0],g=f[1],h=Object(u.g)(),E=Object(u.f)(),y=Object(a.useMemo)((function(){return[{key:"nearby",name:"Nearby",path:"/events",active:"/events"===h.pathname},{key:"report",name:"Report",path:"/report",active:"/report"===h.pathname},{key:"sos",name:"SOS",path:"/sos",active:"/sos"===h.pathname}]}),[h]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a.Pushable,{className:"no-overflow"},r.a.createElement(V,{visible:b}),r.a.createElement(Q,{visible:b}),r.a.createElement(d.a.Pusher,null,r.a.createElement(N,{center:null!==o&&void 0!==o?o:t.defaultPosition,position:o,onMoveEnd:function(e){var t=e.getCenter();t.lng,t.lat},toggleControls:function(e){if("boolean"===typeof e)return g(e);g((function(e){return!e}))},onContextMenu:function(e){console.log(e)}}))),r.a.createElement(p.a,{pointing:!0,inverted:!0,fixed:"bottom",size:"large",widths:3,onItemClick:function(e,t){var n=t.path;g(!0),E.push(n)},items:y}))})),q=n(42),K=n(201),ee={dangerClose:!1,nearbyEvents:[]},te={marker:null},ne={defaultPosition:null!==(z=JSON.parse(localStorage.getItem("update_default_position")))&&void 0!==z?z:[-74,40.73],eventFilter:[],showBasicMapFeatures:!0,showVolumetricBuildings:!0},ae=Object(q.c)({events:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"fetch_events":return Object(g.a)({},e,{nearbyEvents:a});default:return e}},map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"set_marker_position":return Object(g.a)({},e,{marker:a});default:return e}},preferences:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"update_default_position":return Object(g.a)({},e,{defaultPosition:a});case"update_event_filter":return Object(g.a)({},e,{eventFilter:a});default:return e}}}),re=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||q.d,ie=Object(q.e)(ae,{},re(Object(q.a)(K.a)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(c.a,{store:ie},r.a.createElement(l.a,null,r.a.createElement($,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},83:function(e,t,n){"use strict";var a=n(183),r=n.n(a).a.create({baseURL:"https://likewater-internal.azurewebsites.net/api"});t.a=r}},[[213,1,2]]]);
//# sourceMappingURL=main.7e436c69.chunk.js.map