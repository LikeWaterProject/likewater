{"version":3,"sources":["components/EventList.js"],"names":["categories","type","EventType","text","icon","className","style","color","marginRight","connect","state","events","map","inverted","preferences","invertedTheme","setEventFilter","history","useHistory","nearbyEvents","eventFilters","useState","sortBy","displayEvents","useEvents","filtersVisible","setFiltersVisible","handleItemClick","useCallback","id","push","listItems","useMemo","event","index","Item","key","onClick","eventId","Content","floated","formatDistance","parseInt","reportedDt","Date","now","addSuffix","paddingTop","Header","eventType","Description","distance","raised","padding","as","visible","animation","duration","position","right","circular","size","content","v","border","backgroundColor","textAlign","fontSize","top","maxWidth","height","overflowX","whiteSpace","toggle","verticalAlign","handleFilterCategory","divided","selection","maxHeight","overflowY"],"mappings":"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","file":"static/js/7.cdb16f70.chunk.js","sourcesContent":["import React, { useState, useCallback, useMemo } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { formatDistance } from \"date-fns\";\r\nimport { Segment, Header, List, Button, Transition } from \"semantic-ui-react\";\r\n\r\nimport { setEventFilter } from \"../actions\";\r\nimport { useEvents } from \"../hooks\";\r\nimport * as EventType from \"../events/types\";\r\n\r\nconst categories = [\r\n  {\r\n    type: EventType.AID,\r\n    text: \"Aid\",\r\n    icon: (\r\n      <i\r\n        className=\"ri-first-aid-kit-fill ri-lg\"\r\n        style={{ color: \"gainsboro\", marginRight: 4 }}\r\n      />\r\n    ),\r\n  },\r\n  {\r\n    type: EventType.INFO,\r\n    text: \"Info\",\r\n    icon: (\r\n      <i\r\n        className=\"ri-broadcast-fill ri-lg\"\r\n        style={{ color: \"mediumseagreen\", marginRight: 4 }}\r\n      />\r\n    ),\r\n  },\r\n  {\r\n    type: EventType.POLICE,\r\n    text: \"Police\",\r\n    icon: (\r\n      <i\r\n        className=\"ri-alarm-warning-fill ri-lg\"\r\n        style={{ color: \"royalblue\", marginRight: 4 }}\r\n      />\r\n    ),\r\n  },\r\n  {\r\n    type: EventType.SAFETY,\r\n    text: \"Safety\",\r\n    icon: (\r\n      <i\r\n        className=\"ri-fire-fill ri-lg\"\r\n        style={{ color: \"darkorange\", marginRight: 4 }}\r\n      />\r\n    ),\r\n  },\r\n  {\r\n    type: EventType.EMERGENCY,\r\n    text: \"SOS\",\r\n    icon: (\r\n      <i\r\n        className=\"ri-lifebuoy-fill ri-lg\"\r\n        style={{ color: \"crimson\", marginRight: 4 }}\r\n      />\r\n    ),\r\n  },\r\n];\r\n\r\nconst EventList = ({ map, events, inverted, setEventFilter }) => {\r\n  const history = useHistory();\r\n  const { nearbyEvents, eventFilters } = events;\r\n  const [sortBy, setSortBy] = useState(\"distance\");\r\n  const displayEvents = useEvents(nearbyEvents, eventFilters, sortBy);\r\n  const [filtersVisible, setFiltersVisible] = useState(false);\r\n  // const { currentPosition, defaultPosition } = map;\r\n\r\n  const handleItemClick = useCallback(\r\n    (id) => {\r\n      history.push(`/events/${id}`);\r\n    },\r\n    [history]\r\n  );\r\n\r\n  const handleFilterCategory = (type) => {\r\n    setEventFilter({ [type]: !eventFilters[type] });\r\n  };\r\n\r\n  const listItems = useMemo(\r\n    () =>\r\n      displayEvents.map((event, index) => (\r\n        <List.Item key={index} onClick={() => handleItemClick(event.eventId)}>\r\n          <List.Content floated=\"right\">\r\n            {formatDistance(parseInt(event.reportedDt), Date.now(), {\r\n              addSuffix: true,\r\n            })}\r\n          </List.Content>\r\n          <List.Content floated=\"left\" style={{ paddingTop: 8 }}>\r\n            <i\r\n              className={`ri-${event.icon}-fill ri-xl`}\r\n              style={{ color: event.color }}\r\n            />\r\n          </List.Content>\r\n          <List.Content>\r\n            <List.Header>{event.eventType}</List.Header>\r\n            <List.Description>\r\n              <b>{`${event.distance}ft`}</b>\r\n              {/* <b>{`${Coordinate.distanceBetween(\r\n                currentPosition ?? defaultPosition,\r\n                event.coordinates\r\n              )}ft`}</b> */}\r\n            </List.Description>\r\n          </List.Content>\r\n        </List.Item>\r\n      )),\r\n    [displayEvents, handleItemClick]\r\n  );\r\n\r\n  return (\r\n    <Segment\r\n      className=\"clickable\"\r\n      raised\r\n      inverted={inverted}\r\n      style={{ padding: 16 }}\r\n    >\r\n      <div className=\"panel-header\">\r\n        {!filtersVisible && (\r\n          <div className=\"panel-header-text\">\r\n            <Header inverted={inverted} as=\"h3\">\r\n              Events\r\n            </Header>\r\n          </div>\r\n        )}\r\n        <Transition\r\n          visible={!filtersVisible}\r\n          animation=\"vertical flip\"\r\n          duration={300}\r\n        >\r\n          <div style={{ position: \"absolute\", right: 16 }}>\r\n            <Button circular size=\"tiny\" color=\"grey\" content=\"Sort\" />\r\n            <Button\r\n              circular\r\n              size=\"tiny\"\r\n              color=\"grey\"\r\n              content=\"Filter\"\r\n              onClick={() => setFiltersVisible((v) => !v)}\r\n            />\r\n          </div>\r\n        </Transition>\r\n        {filtersVisible && (\r\n          <button\r\n            style={{\r\n              border: \"none\",\r\n              backgroundColor: \"transparent\",\r\n              textAlign: \"center\",\r\n              fontSize: 18,\r\n              color: inverted ? \"white\" : \"#212121\",\r\n            }}\r\n            onClick={() => setFiltersVisible((v) => !v)}\r\n          >\r\n            <i className=\"ri-arrow-left-line panel-icon\" />\r\n          </button>\r\n        )}\r\n        <div className=\"button-row\">\r\n          <Transition\r\n            visible={filtersVisible}\r\n            animation=\"vertical flip\"\r\n            duration={300}\r\n          >\r\n            <div\r\n              style={{\r\n                position: \"absolute\",\r\n                top: 16,\r\n                maxWidth: \"80%\",\r\n                height: 48,\r\n                overflowX: \"auto\",\r\n                whiteSpace: \"nowrap\",\r\n              }}\r\n            >\r\n              {categories.map(({ type, text, icon }) => (\r\n                <Button\r\n                  circular\r\n                  toggle\r\n                  inverted\r\n                  size=\"tiny\"\r\n                  key={type}\r\n                  style={\r\n                    eventFilters[type]\r\n                      ? {\r\n                          color: \"black\",\r\n                          backgroundColor: \"white\",\r\n                          verticalAlign: \"middle\",\r\n                        }\r\n                      : {\r\n                          color: \"white\",\r\n                          backgroundColor: \"transparent\",\r\n                          verticalAlign: \"middle\",\r\n                        }\r\n                  }\r\n                  onClick={() => handleFilterCategory(type)}\r\n                >\r\n                  {icon}\r\n                  {text}\r\n                </Button>\r\n              ))}\r\n            </div>\r\n          </Transition>\r\n        </div>\r\n      </div>\r\n      <List\r\n        inverted={inverted}\r\n        divided\r\n        selection\r\n        verticalAlign=\"middle\"\r\n        style={{ maxHeight: 236, overflowY: \"auto\" }}\r\n      >\r\n        {listItems}\r\n      </List>\r\n    </Segment>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    events: state.events,\r\n    map: state.map,\r\n    inverted: state.preferences.invertedTheme,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { setEventFilter })(EventList);\r\n"],"sourceRoot":""}