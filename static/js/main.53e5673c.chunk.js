(this.webpackJsonplikewater=this.webpackJsonplikewater||[]).push([[0],{183:function(e,t,n){e.exports=n.p+"static/media/pushpin-2-fill.ee14c364.svg"},184:function(e,t,n){e.exports=n.p+"static/media/alarm-warning-fill.672b5640.svg"},185:function(e,t,n){e.exports=n.p+"static/media/fire-fill.3ef6087f.svg"},186:function(e,t,n){e.exports=n.p+"static/media/first-aid-kit-fill.df4d90db.svg"},187:function(e,t,n){e.exports=n.p+"static/media/broadcast-fill.9172578d.svg"},188:function(e,t,n){e.exports=n.p+"static/media/focus-3-line.54eac840.svg"},212:function(e,t,n){e.exports=n(387)},223:function(e,t,n){},387:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(28),o=n.n(i),l=n(52),c=n(60),s=(n(221),n(222),n(223),n(65)),u=n(15),m=n(395),d=n(399),p=n(400),v=n(398),f=n(19),g=(n(43),n(85),n(182)),b=(n.n(g).a.create({baseURL:""}),n(183)),h=n.n(b),E=n(184),y=n.n(E),k=n(185),O=n.n(k),w=n(186),j=n.n(w),x=n(187),_=n.n(x),I=n(188),M=n.n(I),S=Object(f.d)({accessToken:"pk.eyJ1IjoicmVrdGRlY2thcmQiLCJhIjoiY2theWJ4OXM0MGhiejJ3cnkzcmk0andiYyJ9.IinlG0vyUvcWhvlAREJXeA"}),C=new Image(24,24);C.src=h.a;var P=new Image(24,24);P.src=y.a;var J=new Image(24,24);J.src=O.a;var B=new Image(24,24);B.src=j.a;var z=new Image(24,24);z.src=_.a;var A=new Image(24,24);A.src=M.a;var D,L={defaultZoom:[10],volumetricPainter:{"fill-extrusion-color":"#424d5c","fill-extrusion-height":{type:"identity",property:"height"},"fill-extrusion-base":{type:"identity",property:"min_height"},"fill-extrusion-opacity":.6}},R=[{eventId:"3A4221E1-9AD7-4296-863D-3B8F56E092C7",eventType:"Riots",userToken:"123423",eventDesc:"Example Riot Event",coordinates:{lat:40.73663,lon:-73.99973},reportedDt:"12345",confirms:0,dismisses:0}],F=Object(l.b)((function(e){return{preferences:e.preferences,marker:e.map.marker}}),{setMarkerPosition:function(e){return console.log(e),{type:"set_marker_position",payload:e}}})((function(e){var t=e.center,n=e.onMoveEnd,i=e.toggleControls,o=e.preferences,l=e.marker,c=e.setMarkerPosition,s=Object(u.f)(),m=Object(v.a)(),d=m.width,p=m.height,g=o.showVolumetricBuildings,b=(o.showBasicMapFeatures,function(e,t){e.map.getCanvas().style.cursor=t}),h=Object(a.useCallback)((function(e){var t=e.feature;e.originalEvent.preventDefault(),i(!0),s.push("/events/".concat(t.properties.eventId))}),[s,i]),E=Object(a.useMemo)((function(){return{onMouseEnter:function(e){return b(e,"pointer")},onMouseLeave:function(e){return b(e,"")},onClick:h}}),[h]);return r.a.createElement("div",{style:{width:d,height:p}},r.a.createElement(S,{style:"mapbox://styles/rektdeckard/ckayd52rb0xzg1imcbyek0g4y",center:t,zoom:L.defaultZoom,containerStyle:{height:"100%",width:"100%"},onStyleLoad:function(e,t){console.log(t),e.on("click",(function(e){e.originalEvent.defaultPrevented||(i(),s.push("/"))}))},onMoveEnd:function(e,t){var a,r;console.log(t.originalEvent),null===(a=t.originalEvent)||void 0===a||null===(r=a.stopPropagation)||void 0===r||r.call(a),n(e)},onContextMenu:function(e,t){var n=t.lngLat,a=n.lat,r=n.lng;i(!0),c([r,a]),s.push("/submit")}},r.a.createElement(f.b,{id:"police",data:P}),r.a.createElement(f.b,{id:"pin",data:C}),r.a.createElement(f.b,{id:"fire",data:J}),r.a.createElement(f.b,{id:"medical",data:B}),r.a.createElement(f.b,{id:"info",data:z}),r.a.createElement(f.b,{id:"position",data:A}),g&&r.a.createElement(f.c,{id:"3d-buildings",type:"fill-extrusion",sourceId:"composite",sourceLayer:"building",filter:["==","extrude","true"],minZoom:14,paint:L.volumetricPainter}),l&&r.a.createElement(f.c,{id:"map-marker",type:"symbol",layout:{"icon-image":"pin","icon-anchor":"bottom","icon-allow-overlap":!0}},r.a.createElement(f.a,{coordinates:l})),r.a.createElement(f.c,{id:"event-markers",type:"symbol",layout:{"icon-image":"info","icon-allow-overlap":!0}},R.map((function(e){var t=e.eventId,n=e.coordinates,a=n.lon,i=n.lat;return r.a.createElement(f.a,Object.assign({key:t,coordinates:[a,i],properties:e},E))}))),r.a.createElement(f.c,{id:"location-marker",type:"symbol",layout:{"icon-image":"position","icon-allow-overlap":!0}},r.a.createElement(f.a,Object.assign({coordinates:t,properties:{coordinates:t}},E)))))})),N=n(401),T=n(396),V=function(e){var t=e.visible,n=Object(a.useState)(""),i=Object(s.a)(n,2),o=i[0],l=i[1];return r.a.createElement(d.a,{as:N.a,inverted:!0,raised:!0,direction:"top",animation:"push",textAlign:"center",visible:t},r.a.createElement(T.a,{value:o,onSearchChange:function(e,t){var n=t.value;return l(n)},open:!1}))},W=n(394),X=function(){return r.a.createElement(N.a,{raised:!0,inverted:!0,style:{padding:8,paddingBottom:44}},r.a.createElement("div",{style:{minHeight:200,display:"flex",alignItems:"center"}},r.a.createElement(W.a,{active:!0,inline:"centered"})))},G=r.a.lazy((function(){return n.e(5).then(n.bind(null,406))})),U=r.a.lazy((function(){return n.e(3).then(n.bind(null,404))})),Y=r.a.lazy((function(){return n.e(4).then(n.bind(null,405))})),Z=r.a.createElement(X,null),H=Object(u.h)((function(e){var t=e.visible;return r.a.createElement(d.a,{className:"no-overflow",animation:"push",direction:"bottom",visible:t},r.a.createElement(u.c,null,r.a.createElement(u.a,{exact:!0,path:"/events"},r.a.createElement(a.Suspense,{fallback:Z},r.a.createElement(G,null))),r.a.createElement(u.a,{path:"/events/:id"},r.a.createElement(a.Suspense,{fallback:Z},r.a.createElement(U,null))),r.a.createElement(u.a,{exact:!0,path:"/submit"},r.a.createElement(a.Suspense,{fallback:Z},r.a.createElement(Y,null))),r.a.createElement(u.a,{exact:!0,path:"/report"},r.a.createElement(X,null)),r.a.createElement(u.a,{exact:!0,path:"/sos"},r.a.createElement(X,null))))})),Q=Object(l.b)((function(e){return{events:e.events,preferences:e.preferences}}),{})((function(e){e.events;var t=e.preferences,n=Object(a.useState)(null),i=Object(s.a)(n,2),o=i[0],l=i[1],c=Object(m.a)({enableHighAccuracy:!1,maximumAge:15e3,timeout:3e4});Object(a.useEffect)((function(){!c.loading&&c.longitude&&l([c.longitude,c.latitude])}),[c]);var v=Object(a.useState)(!0),f=Object(s.a)(v,2),g=f[0],b=f[1],h=Object(u.g)(),E=Object(u.f)(),y=Object(a.useMemo)((function(){return[{key:"nearby",name:"Nearby",path:"/events",active:"/events"===h.pathname},{key:"report",name:"Report",path:"/report",active:"/report"===h.pathname},{key:"sos",name:"SOS",path:"/sos",active:"/sos"===h.pathname}]}),[h]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a.Pushable,{className:"no-overflow"},r.a.createElement(V,{visible:g}),r.a.createElement(H,{visible:g}),r.a.createElement(d.a.Pusher,null,r.a.createElement(F,{center:null!==o&&void 0!==o?o:t.defaultPosition,position:o,onMoveEnd:function(e){var t=e.getCenter();t.lng,t.lat},toggleControls:function(e){if("boolean"===typeof e)return b(e);b((function(e){return!e}))},onContextMenu:function(e){console.log(e)}}))),r.a.createElement(p.a,{pointing:!0,inverted:!0,fixed:"bottom",size:"large",widths:3,onItemClick:function(e,t){var n=t.path;b(!0),E.push(n)},items:y}))})),$=n(42),q=n(200),K=n(41),ee={dangerClose:!1,nearbyEvents:[]},te={marker:null},ne={defaultPosition:null!==(D=JSON.parse(localStorage.getItem("update_default_position")))&&void 0!==D?D:[-74,40.73],eventFilter:[],showBasicMapFeatures:!0,showVolumetricBuildings:!0},ae=Object($.c)({events:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"fetch_events":return Object(K.a)({},e,{nearbyEvents:a});default:return e}},map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"set_marker_position":return Object(K.a)({},e,{marker:a});default:return e}},preferences:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"update_default_position":return Object(K.a)({},e,{defaultPosition:a});case"update_event_filter":return Object(K.a)({},e,{eventFilter:a});default:return e}}}),re=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||$.d,ie=Object($.e)(ae,{},re(Object($.a)(q.a)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(l.a,{store:ie},r.a.createElement(c.a,null,r.a.createElement(Q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[212,1,2]]]);
//# sourceMappingURL=main.53e5673c.chunk.js.map