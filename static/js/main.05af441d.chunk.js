(this.webpackJsonplikewater=this.webpackJsonplikewater||[]).push([[0],{180:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var a=n(0),r=function(e){(function(e){return!!e.touches})(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault&&e.preventDefault()},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isPreventDefault,o=void 0===n||n,i=t.delay,c=void 0===i?500:i,l=Object(a.useRef)(),s=Object(a.useRef)(),u=Object(a.useCallback)((function(t,n){var a=n.originalEvent;o&&a.target&&(a.target.addEventListener("touchend",r,{passive:!0}),s.current=a.target),l.current=setTimeout((function(){t.isMoving()||t.isRotating()||t.isZooming()||e(t,n)}),c)}),[e,c]),d=Object(a.useCallback)((function(){l.current&&clearTimeout(l.current),o&&s.current&&s.current.removeEventListener("touchend",r)}),[]);return{onMouseDown:function(e,t){return u(e,t)},onTouchStart:function(e,t){return u(e,t)},onMouseUp:d,onMouseLeave:d,onTouchEnd:d}},i=n(32),c=function(e){return e.map((function(e){var t=e.eventId,n=e.eventType,a=e.eventDesc,r=e.coordinates,o=e.reportedDt;return Object(i.a)({eventId:t,eventType:n,coordinates:r,eventDesc:a,reportedDt:o},function(e){switch(e){case"aid":return{icon:"first-aid-kit-fill",color:"floralwhite"};case"emergency":return{icon:"emergency",color:"crimson"};case"info":return{icon:"bullhorn",color:"forestgreen"};case"police":return{icon:"alarm-warning",color:"royalblue"};case"safety":return{icon:"fire",color:"darkorange"};default:return{icon:"map pin",color:"darkmagenta"}}}("police"))}))}},183:function(e,t,n){e.exports=n.p+"static/media/pushpin-2-fill.ee14c364.svg"},184:function(e,t,n){e.exports=n.p+"static/media/alarm-warning-fill.672b5640.svg"},185:function(e,t,n){e.exports=n.p+"static/media/fire-fill.3ef6087f.svg"},186:function(e,t,n){e.exports=n.p+"static/media/first-aid-kit-fill.df4d90db.svg"},187:function(e,t,n){e.exports=n.p+"static/media/broadcast-fill.9172578d.svg"},188:function(e,t,n){e.exports=n.p+"static/media/focus-3-line.54eac840.svg"},210:function(e,t,n){e.exports=n(373)},221:function(e,t,n){},373:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(28),i=n.n(o),c=n(50),l=n(79),s=(n(219),n(220),n(221),n(80)),u=n(383),d=n(387),m=n(15),p=n(386),f=n(19),v=n(180),g=(n(43),n(81),n(82),n(183)),b=n.n(g),h=n(184),E=n.n(h),y=n(185),k=n.n(y),w=n(186),O=n.n(w),j=n(187),x=n.n(j),_=n(188),P=n.n(_),D=Object(f.d)({accessToken:"pk.eyJ1IjoicmVrdGRlY2thcmQiLCJhIjoiY2theWJ4OXM0MGhiejJ3cnkzcmk0andiYyJ9.IinlG0vyUvcWhvlAREJXeA"}),I=new Image(24,24);I.src=b.a;var M=new Image(24,24);M.src=E.a;var C=new Image(24,24);C.src=k.a;var S=new Image(24,24);S.src=O.a;var T=new Image(24,24);T.src=x.a;var J=new Image(24,24);J.src=P.a;var L,z={defaultZoom:[10],volumetricPainter:{"fill-extrusion-color":"#424d5c","fill-extrusion-height":{type:"identity",property:"height"},"fill-extrusion-base":{type:"identity",property:"min_height"},"fill-extrusion-opacity":.6}},R=[{eventId:"3A4221E1-9AD7-4296-863D-3B8F56E092C7",eventType:"Riots",userToken:"123423",eventDesc:"Example Riot Event",coordinates:{lat:40.73663,lon:-73.99973},reportedDt:"12345",confirms:0,dismisses:0}],A=Object(c.b)((function(e){return{map:e.map}}),{setMarkerPosition:function(e){return{type:"set_marker_position",payload:e}}})((function(e){var t=e.center,n=e.onMoveEnd,o=e.toggleControls,i=e.map,c=e.setMarkerPosition,l=Object(m.f)(),s=Object(p.a)(),u=s.width,d=s.height,g=i.markerPosition,b=i.showVolumetricBuildings,h=(i.showBasicMapFeatures,function(e,t){e.map.getCanvas().style.cursor=t}),E=Object(a.useCallback)((function(e){var t=e.map,n=e.feature.properties,a=n.eventId,r=n.coordinates;e.originalEvent.preventDefault();var i=JSON.parse(r),c=i.lon,s=i.lat;t.flyTo({center:[c,s],zoom:16}),o(!0),l.push("/events/".concat(a))}),[l,o]),y=Object(a.useMemo)((function(){return{onMouseEnter:function(e){return h(e,"pointer")},onMouseLeave:function(e){return h(e,"")},onClick:E}}),[E]),k=function(e,t){var n=t.lngLat,a=n.lat,r=n.lng;t.originalEvent.preventDefault(),o(!0),c([r,a]),e.flyTo({center:[r,a],zoom:16}),l.push("/submit")},w=Object(v.b)(k,{isPreventDefault:!0,delay:500});return r.a.createElement("div",{style:{width:u,height:d}},r.a.createElement(D,Object.assign({style:"mapbox://styles/rektdeckard/ckayd52rb0xzg1imcbyek0g4y",center:t,zoom:z.defaultZoom,containerStyle:{height:"100%",width:"100%"},onStyleLoad:function(e){e.on("click",(function(e){e.originalEvent.defaultPrevented||(c(null),l.push("/"))}))},onMoveEnd:function(e,t){var a,r;null===(a=t.originalEvent)||void 0===a||null===(r=a.preventDefault)||void 0===r||r.call(a),n(e)},onContextMenu:k},w),r.a.createElement(f.b,{id:"police",data:M}),r.a.createElement(f.b,{id:"pin",data:I}),r.a.createElement(f.b,{id:"fire",data:C}),r.a.createElement(f.b,{id:"medical",data:S}),r.a.createElement(f.b,{id:"info",data:T}),r.a.createElement(f.b,{id:"position",data:J}),b&&r.a.createElement(f.c,{id:"3d-buildings",type:"fill-extrusion",sourceId:"composite",sourceLayer:"building",filter:["==","extrude","true"],minZoom:14,paint:z.volumetricPainter}),g&&r.a.createElement(f.c,{id:"map-marker",type:"symbol",layout:{"icon-image":"pin","icon-anchor":"bottom","icon-allow-overlap":!0}},r.a.createElement(f.a,{coordinates:g})),r.a.createElement(f.c,{id:"event-markers",type:"symbol",layout:{"icon-image":"info","icon-allow-overlap":!0}},R.map((function(e){var t=e.eventId,n=e.coordinates,a=n.lon,o=n.lat;return r.a.createElement(f.a,Object.assign({key:t,coordinates:[a,o],properties:e},y))}))),r.a.createElement(f.c,{id:"location-marker",type:"symbol",layout:{"icon-image":"position","icon-allow-overlap":!0}},r.a.createElement(f.a,{coordinates:t,properties:{coordinates:t}}))))})),B=n(375),F=n(384),N=function(e){e.visible;var t=Object(a.useState)(""),n=Object(s.a)(t,2),o=n[0],i=n[1];return r.a.createElement(d.a,{as:B.a,inverted:!0,raised:!0,direction:"top",animation:"push",textAlign:"center",visible:!0},r.a.createElement(F.a,{value:o,onSearchChange:function(e,t){var n=t.value;return i(n)},open:!1}))},U=n(85),V=r.a.createElement(U.a,null),W=r.a.lazy((function(){return n.e(4).then(n.bind(null,433))})),X=r.a.lazy((function(){return Promise.all([n.e(3),n.e(6)]).then(n.bind(null,432))})),Z=r.a.lazy((function(){return n.e(5).then(n.bind(null,435))})),G=Object(m.g)((function(e){var t=e.visible;return r.a.createElement(d.a,{className:"no-overflow",animation:"push",direction:"bottom",visible:t},r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/"},r.a.createElement(a.Suspense,{fallback:V},r.a.createElement(W,null))),r.a.createElement(m.a,{path:"/events/:id"},r.a.createElement(a.Suspense,{fallback:V},r.a.createElement(X,null))),r.a.createElement(m.a,{exact:!0,path:"/submit"},r.a.createElement(a.Suspense,{fallback:V},r.a.createElement(Z,null))),r.a.createElement(m.a,{exact:!0,path:"/report"},r.a.createElement(U.a,null)),r.a.createElement(m.a,{exact:!0,path:"/sos"},r.a.createElement(U.a,null))))})),Y=Object(c.b)((function(e){return{events:e.events,map:e.map}}),{setCurrentPosition:function(e){return{type:"set_current_position",payload:e}}})((function(e){e.events;var t=e.map,n=e.setCurrentPosition,o=t.currentPosition,i=Object(u.a)({enableHighAccuracy:!1,maximumAge:15e3,timeout:3e4});Object(a.useEffect)((function(){!i.loading&&i.longitude&&n(i)}),[i]);var c=Object(a.useState)(!0),l=Object(s.a)(c,2),m=l[0],p=l[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a.Pushable,{className:"no-overflow"},r.a.createElement(N,{visible:m}),r.a.createElement(G,{visible:m}),r.a.createElement(d.a.Pusher,null,r.a.createElement(A,{center:null!==o&&void 0!==o?o:t.defaultPosition,position:o,onMoveEnd:function(e){var t=e.getCenter();t.lng,t.lat},toggleControls:function(e){if("boolean"===typeof e)return p(e);p((function(e){return!e}))},onContextMenu:function(e){console.log(e)}}))))})),H=n(42),Q=n(199),$=n(32),q={dangerClose:!1,nearbyEvents:[],eventFilter:[]},K={markerPosition:null,currentPositon:null,defaultPosition:null!==(L=JSON.parse(localStorage.getItem("update_default_position")))&&void 0!==L?L:[-74,40.73],showBasicMapFeatures:!0,showVolumetricBuildings:!0},ee=Object(H.c)({events:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"fetch_events":return Object($.a)({},e,{nearbyEvents:a});case"update_event_filter":return Object($.a)({},e,{eventFilter:a});default:return e}},map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"set_marker_position":return Object($.a)({},e,{markerPosition:a});case"set_current_position":return Object($.a)({},e,{currentPositon:a});case"update_default_position":return Object($.a)({},e,{defaultPosition:a});default:return e}}}),te=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||H.d,ne=Object(H.e)(ee,{},te(Object(H.a)(Q.a)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(c.a,{store:ne},r.a.createElement(l.a,null,r.a.createElement(Y,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},82:function(e,t,n){"use strict";var a=n(182),r=n.n(a).a.create({baseURL:"https://likewater-internal.azurewebsites.net/api"});t.a=r},85:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(375),i=n(374);t.a=function(){return r.a.createElement(o.a,{raised:!0,inverted:!0,style:{padding:8,height:292}},r.a.createElement("div",{style:{height:"100%",display:"flex",alignItems:"center"}},r.a.createElement(i.a,{active:!0,inline:"centered"})))}}},[[210,1,2]]]);
//# sourceMappingURL=main.05af441d.chunk.js.map