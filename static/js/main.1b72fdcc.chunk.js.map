{"version":3,"sources":["components/LoadingPanel.js","hooks/useLongPress.js","hooks/useEvents.js","data/eventTypes.js","assets/pushpin-2-fill.svg","assets/alarm-warning-fill.svg","assets/fire-fill.svg","assets/first-aid-kit-fill.svg","assets/broadcast-fill.svg","assets/focus-3-line.svg","actions/types.js","actions/eventActions.js","actions/mapActions.js","components/Geolocator.js","components/MapControls.js","components/MapView.js","components/TopSheet.js","components/BottomSheet.js","components/App.js","reducers/eventsReducer.js","reducers/mapReducer.js","reducers/index.js","serviceWorker.js","index.js","api/index.js"],"names":["LoadingPanel","raised","inverted","style","padding","height","display","alignItems","active","inline","preventDefault","event","isTouchEvent","touches","length","useLongPress","callback","isPreventDefault","delay","timeout","useRef","target","start","useCallback","map","originalEvent","addEventListener","passive","current","setTimeout","clear","clearTimeout","removeEventListener","onTouchStart","onTouchEnd","mapEvents","modelEvents","eventId","eventType","eventDesc","coordinates","reportedDt","icon","color","getEventIcon","useEvents","useMemo","module","exports","FETCH_EVENTS","FETCH_EVENT_DETAILS","SET_EVENT_FILTER","SET_DEFAULT_POSITION","SET_CURRENT_POSITION","SET_MARKER_POSITION","SET_USE_GEOLOCATION","reportEvent","report","dispatch","a","API","post","type","setMarkerPosition","payload","setCurrentPosition","position","setUseGeolocation","preferred","localStorage","setItem","JSON","stringify","navigator","permissions","query","name","state","initializeGeolocation","getState","parse","getItem","then","permissionStatus","permitted","onchange","shouldUseGeolocation","connect","location","useGeolocation","enableHighAccuracy","maximumAge","useEffect","isMounted","loading","longitude","context","Button","top","right","onClick","rotateTo","Group","vertical","zoomIn","zoomOut","Mapbox","ReactMapboxGl","accessToken","attributionControl","pinIcon","Image","src","pinAsset","policeIcon","policeAsset","fireIcon","fireAsset","medicalIcon","medicalAsset","infoIcon","infoAsset","positionIcon","positionAsset","MAP_DEFAULTS","defaultZoom","volumetricPainter","property","data","userToken","confirms","dismisses","lat","lon","onMoveEnd","toggleControls","history","useHistory","useWindowSize","width","currentPosition","defaultPosition","markerPosition","showVolumetricBuildings","onItemHover","showBasicMapFeatures","cursor","getCanvas","handleItemClick","feature","properties","flyTo","center","zoom","push","onMouseEvents","onMouseEnter","onMouseLeave","handleAddMarker","mapEvent","isMoving","isRotating","isZooming","lngLat","lng","longPressEvent","containerStyle","latitude","onStyleLoad","on","defaultPrevented","onContextMenu","id","Consumer","sourceId","sourceLayer","filter","minZoom","paint","layout","evt","key","TopSheet","visible","useState","setQuery","Sidebar","as","Segment","direction","animation","textAlign","Menu","borderless","widths","Item","fitted","Search","disabled","value","onSearchChange","onFocus","onBlur","open","circular","size","floated","Loader","EventList","React","lazy","EventDetails","EventSubmit","withRouter","className","boxShadow","compact","window","confirm","path","fallback","exact","controlsVisible","setControlsVisible","handleToggleControls","v","Pushable","Pusher","getCenter","console","log","INITIAL_STATE","dangerClose","nearbyEvents","eventFilter","rootReducer","combineReducers","events","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","Boolean","hostname","match","ReactDOM","render","document","getElementById","serviceWorker","ready","registration","unregister","catch","error","message","axios","create","baseURL"],"mappings":"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","file":"static/js/main.1b72fdcc.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Segment, Loader } from \"semantic-ui-react\";\r\n\r\nconst LoadingPanel = () => (\r\n  <Segment raised inverted style={{ padding: 8, height: 292}}>\r\n    <div style={{ height: \"100%\", display: \"flex\", alignItems: \"center\" }}>\r\n      <Loader active inline=\"centered\" />\r\n    </div>\r\n  </Segment>\r\n);\r\n\r\nexport default LoadingPanel;\r\n","/* eslint-disable */\r\nimport { useCallback, useRef } from \"react\";\r\n\r\nconst isTouchEvent = (event) => {\r\n  return !!event[\"touches\"];\r\n};\r\n\r\nconst preventDefault = (event) => {\r\n  if (!isTouchEvent(event)) return;\r\n  if (event.touches.length > 1 && event.preventDefault) {\r\n    event.preventDefault && event.preventDefault();\r\n  }\r\n};\r\n\r\nexport const useLongPress = (\r\n  callback,\r\n  { isPreventDefault = true, delay = 500 } = {}\r\n) => {\r\n  const timeout = useRef();\r\n  const target = useRef();\r\n\r\n  const start = useCallback(\r\n    (map, event) => {\r\n      const { originalEvent } = event;\r\n      // prevent ghost click on mobile devices\r\n      if (isPreventDefault && originalEvent.target) {\r\n        originalEvent.target.addEventListener(\"touchend\", preventDefault, {\r\n          passive: false,\r\n        });\r\n        target.current = originalEvent.target;\r\n      }\r\n      if (originalEvent.touches.length < 2) {\r\n        timeout.current = setTimeout(() => {\r\n          callback(map, event);\r\n        }, delay);\r\n      }\r\n    },\r\n    [callback, delay]\r\n  );\r\n\r\n  const clear = useCallback((map, event) => {\r\n    // clearTimeout and removeEventListener\r\n    timeout.current && clearTimeout(timeout.current);\r\n    if (isPreventDefault && target.current) {\r\n      target.current.removeEventListener(\"touchend\", preventDefault);\r\n    }\r\n  }, []);\r\n\r\n  return {\r\n    // onMouseDown: start,\r\n    onTouchStart: start,\r\n    // onMouseUp: clear,\r\n    // onMouseLeave: clear,\r\n    onTouchEnd: clear,\r\n  };\r\n};\r\n","import { useMemo } from \"react\";\r\nimport { AID, EMERGENCY, INFO, POLICE, SAFETY } from \"../data/eventTypes\";\r\n\r\nconst getEventIcon = (eventType) => {\r\n  switch (eventType) {\r\n    case AID:\r\n      return { icon: \"first-aid-kit\", color: \"gainsboro\" };\r\n    case EMERGENCY:\r\n      return { icon: \"lifebuoy\", color: \"crimson\" };\r\n    case INFO:\r\n      return { icon: \"broadcast\", color: \"mediumseagreen\" };\r\n    case POLICE:\r\n      return { icon: \"alarm-warning\", color: \"royalblue\" };\r\n    case SAFETY:\r\n      return { icon: \"fire\", color: \"darkorange\" };\r\n    default:\r\n      return { icon: \"pushpin-2\", color: \"mediumpurple\" };\r\n  }\r\n};\r\n\r\n// const getEventIcon = (eventType) => {\r\n//   switch (eventType) {\r\n//     case AID:\r\n//       return { icon: \"first-aid-kit-fill\", color: \"gainsboro\" };\r\n//     case EMERGENCY:\r\n//       return { icon: \"emergency\", color: \"crimson\" };\r\n//     case INFO:\r\n//       return { icon: \"bullhorn\", color: \"mediumseagreen\" };\r\n//     case POLICE:\r\n//       return { icon: \"alarm-warning\", color: \"royalblue\" };\r\n//     case SAFETY:\r\n//       return { icon: \"fire\", color: \"darkorange\" };\r\n//     default:\r\n//       return { icon: \"map pin\", color: \"mediumpurple\" };\r\n//   }\r\n// };\r\n\r\nexport const mapEvents = (modelEvents) =>\r\n  modelEvents.map((event) => {\r\n    const { eventId, eventType, eventDesc, coordinates, reportedDt } = event;\r\n    return {\r\n      eventId,\r\n      eventType,\r\n      coordinates,\r\n      eventDesc,\r\n      reportedDt,\r\n      ...getEventIcon(eventType),\r\n    };\r\n  });\r\n\r\nexport const useEvents = (modelEvents) =>\r\n  useMemo(() => mapEvents(modelEvents), [modelEvents]);\r\n","export const POLICE = \"police\";\r\nexport const AID = \"aid\";\r\nexport const INFO = \"info\";\r\nexport const SAFETY = \"safety\";\r\nexport const EMERGENCY = \"emergency\";\r\n","module.exports = __webpack_public_path__ + \"static/media/pushpin-2-fill.466aaf39.svg\";","module.exports = __webpack_public_path__ + \"static/media/alarm-warning-fill.129f3113.svg\";","module.exports = __webpack_public_path__ + \"static/media/fire-fill.feb2802d.svg\";","module.exports = __webpack_public_path__ + \"static/media/first-aid-kit-fill.f96d703e.svg\";","module.exports = __webpack_public_path__ + \"static/media/broadcast-fill.d068d7ab.svg\";","module.exports = __webpack_public_path__ + \"static/media/focus-3-line.ec68912f.svg\";","export const FETCH_EVENTS = \"fetch_events\";\r\nexport const FETCH_EVENT_DETAILS = \"fetch_event_details\";\r\nexport const UPDATE_EVENT = \"update_event\";\r\nexport const SET_EVENT_FILTER = \"update_event_filter\";\r\n\r\nexport const SET_DEFAULT_POSITION = \"update_default_position\";\r\nexport const SET_CURRENT_POSITION = \"set_current_position\";\r\nexport const SET_MARKER_POSITION = \"set_marker_position\";\r\nexport const SET_USE_GEOLOCATION = \"set_use_geolocation\";\r\n","import { FETCH_EVENTS, FETCH_EVENT_DETAILS, SET_EVENT_FILTER } from \".\";\r\nimport API from \"../api\";\r\n\r\nexport const getEvents = ({ lat, lon, radius = 5000 }) => async (dispatch) => {\r\n  const result = await API.post(\"/getevents\", { lat, lon, radius });\r\n  dispatch({\r\n    type: FETCH_EVENTS,\r\n    payload: result.data,\r\n  });\r\n};\r\n\r\nexport const getEventDetails = (eventId) => async (dispatch) => {\r\n  const result = await API.post(\"/vieweventdetails\", eventId);\r\n  dispatch({\r\n    type: FETCH_EVENT_DETAILS,\r\n    payload: result.data,\r\n  });\r\n};\r\n\r\nexport const reportEvent = (report) => async (dispatch) => {\r\n  const result = await API.post(\"/submitreport\", report);\r\n  dispatch({\r\n    type: null,\r\n  });\r\n};\r\n\r\nexport const setEventFilter = (filters = []) => {\r\n  localStorage.setItem(SET_EVENT_FILTER, JSON.stringify(filters));\r\n  return {\r\n    type: SET_EVENT_FILTER,\r\n    payload: filters,\r\n  };\r\n};\r\n","import { SET_DEFAULT_POSITION, SET_MARKER_POSITION } from \".\";\r\nimport { SET_CURRENT_POSITION, SET_USE_GEOLOCATION } from \"./types\";\r\n\r\nexport const setMarkerPosition = (coordinates) => {\r\n  return {\r\n    type: SET_MARKER_POSITION,\r\n    payload: coordinates,\r\n  };\r\n};\r\n\r\nexport const setDefaultPosition = (coordinates) => {\r\n  localStorage.setItem(SET_DEFAULT_POSITION, JSON.stringify(coordinates));\r\n  return {\r\n    type: SET_DEFAULT_POSITION,\r\n    payload: coordinates,\r\n  };\r\n};\r\n\r\nexport const setCurrentPosition = (position) => {\r\n  return {\r\n    type: SET_CURRENT_POSITION,\r\n    payload: position,\r\n  };\r\n};\r\n\r\nexport const setUseGeolocation = (preferred) => async (dispatch) => {\r\n  localStorage.setItem(SET_USE_GEOLOCATION, JSON.stringify(preferred));\r\n  const { state: permitted } = await navigator.permissions.query({\r\n    name: \"geolocation\",\r\n  });\r\n\r\n  dispatch({\r\n    type: SET_USE_GEOLOCATION,\r\n    payload: preferred,\r\n  });\r\n\r\n  if (!preferred) dispatch(setCurrentPosition(null));\r\n};\r\n\r\nexport const initializeGeolocation = () => async (dispatch, getState) => {\r\n  const preferred =\r\n    JSON.parse(localStorage.getItem(SET_USE_GEOLOCATION)) ?? false;\r\n\r\n  let permitted;\r\n  navigator.permissions\r\n    .query({ name: \"geolocation\" })\r\n    .then((permissionStatus) => {\r\n      permitted = permissionStatus.state;\r\n      permissionStatus.onchange = ({ target: { state: permitted } }) => {\r\n        dispatch({\r\n          type: SET_USE_GEOLOCATION,\r\n          payload:\r\n            getState().map.shouldUseGeolocation && permitted === \"granted\",\r\n        });\r\n      };\r\n    });\r\n\r\n  dispatch({\r\n    type: SET_USE_GEOLOCATION,\r\n    payload: preferred && permitted === \"granted\",\r\n  });\r\n};\r\n","import { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { useGeolocation } from \"react-use\";\r\n\r\nimport { setCurrentPosition } from \"../actions\";\r\n\r\nconst Geolocator = ({ setCurrentPosition }) => {\r\n  const location = useGeolocation({\r\n    enableHighAccuracy: true,\r\n    maximumAge: 30000,\r\n    timeout: 30000,\r\n  });\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    if (!location.loading && location.longitude) {\r\n      isMounted && setCurrentPosition(location);\r\n    }\r\n\r\n    return () => (isMounted = false);\r\n  }, [location]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default connect(null, { setCurrentPosition })(Geolocator);\r\n","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Button } from \"semantic-ui-react\";\r\n\r\nimport { setUseGeolocation } from \"../actions\";\r\n\r\nconst MapControls = ({ context, shouldUseGeolocation, setUseGeolocation }) => {\r\n  const handleZoomIn = () => {\r\n    context.zoomIn();\r\n  };\r\n\r\n  const handleZoomOut = () => {\r\n    context.zoomOut();\r\n  };\r\n\r\n  const handleReorient = () => {\r\n    context.rotateTo(0);\r\n  };\r\n\r\n  const handleShouldUseGeolocation = () => {\r\n    setUseGeolocation(!shouldUseGeolocation);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button\r\n        icon=\"location arrow\"\r\n        color=\"black\"\r\n        style={{ position: \"absolute\", top: 98, right: 3 }}\r\n        onClick={handleReorient}\r\n      />\r\n      <Button.Group\r\n        vertical\r\n        style={{ position: \"absolute\", top: 142, right: 6 }}\r\n      >\r\n        <Button color=\"black\" icon=\"plus\" onClick={handleZoomIn} />\r\n        <Button color=\"black\" icon=\"minus\" onClick={handleZoomOut} />\r\n      </Button.Group>\r\n      <Button\r\n        color={shouldUseGeolocation ? \"blue\" : \"black\"}\r\n        icon=\"crosshairs\"\r\n        style={{ position: \"absolute\", top: 222, right: 3 }}\r\n        onClick={handleShouldUseGeolocation}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return { shouldUseGeolocation: state.map.shouldUseGeolocation };\r\n};\r\n\r\nexport default connect(mapStateToProps, { setUseGeolocation })(MapControls);\r\n","import React, { useMemo, useCallback } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useWindowSize } from \"react-use\";\r\nimport ReactMapboxGl, {\r\n  MapContext,\r\n  Layer,\r\n  Feature,\r\n  Image as Pin,\r\n} from \"react-mapbox-gl\";\r\n\r\nimport { useLongPress } from \"../hooks\";\r\nimport { setMarkerPosition } from \"../actions\";\r\nimport pinAsset from \"../assets/pushpin-2-fill.svg\";\r\nimport policeAsset from \"../assets/alarm-warning-fill.svg\";\r\nimport fireAsset from \"../assets/fire-fill.svg\";\r\nimport medicalAsset from \"../assets/first-aid-kit-fill.svg\";\r\nimport infoAsset from \"../assets/broadcast-fill.svg\";\r\nimport positionAsset from \"../assets/focus-3-line.svg\";\r\nimport MapControls from \"./MapControls\";\r\n\r\nconst Mapbox = ReactMapboxGl({\r\n  accessToken:\r\n    \"pk.eyJ1IjoicmVrdGRlY2thcmQiLCJhIjoiY2theWJ4OXM0MGhiejJ3cnkzcmk0andiYyJ9.IinlG0vyUvcWhvlAREJXeA\",\r\n  attributionControl: false,\r\n});\r\n\r\nconst pinIcon = new Image(24, 24);\r\npinIcon.src = pinAsset;\r\nconst policeIcon = new Image(24, 24);\r\npoliceIcon.src = policeAsset;\r\nconst fireIcon = new Image(24, 24);\r\nfireIcon.src = fireAsset;\r\nconst medicalIcon = new Image(24, 24);\r\nmedicalIcon.src = medicalAsset;\r\nconst infoIcon = new Image(24, 24);\r\ninfoIcon.src = infoAsset;\r\nconst positionIcon = new Image(24, 24);\r\npositionIcon.src = positionAsset;\r\n\r\nconst MAP_DEFAULTS = {\r\n  defaultZoom: [10],\r\n  volumetricPainter: {\r\n    \"fill-extrusion-color\": \"#424d5c\",\r\n    \"fill-extrusion-height\": {\r\n      type: \"identity\",\r\n      property: \"height\",\r\n    },\r\n    \"fill-extrusion-base\": {\r\n      type: \"identity\",\r\n      property: \"min_height\",\r\n    },\r\n    \"fill-extrusion-opacity\": 0.6,\r\n  },\r\n};\r\n\r\nconst data = [\r\n  {\r\n    eventId: \"0B479F98-12D1-49C5-9A5A-28E8BAC9E420\",\r\n    eventType: \"police\",\r\n    eventDesc: \"Beating at 12th and Lexington\",\r\n    userToken: \"User98765\",\r\n    reportedDt: 1592356915877,\r\n    confirms: 3,\r\n    dismisses: 1,\r\n    coordinates: {\r\n      lat: 41,\r\n      lon: -74,\r\n    },\r\n  },\r\n  {\r\n    eventId: \"0FF83A5F-EA8F-462C-AD8E-81BB704ED4FC\",\r\n    eventType: \"aid\",\r\n    eventDesc: \"Water bottles and eye-wash station\",\r\n    userToken: \"User1111\",\r\n    reportedDt: 1592430145773,\r\n    confirms: 0,\r\n    dismisses: 0,\r\n    coordinates: {\r\n      lat: 40.6911,\r\n      lon: -74.00348,\r\n    },\r\n  },\r\n  {\r\n    eventId: \"582276B6-65C8-4FAE-B7D6-27CD1F9EB19D\",\r\n    eventType: \"info\",\r\n    userToken: \"User1111\",\r\n    eventDesc: \"Rally Point\",\r\n    reportedDt: 1592356992014,\r\n    confirms: 3,\r\n    dismisses: 1,\r\n    coordinates: {\r\n      lat: 40.695103,\r\n      lon: -73.984165,\r\n    },\r\n  },\r\n  {\r\n    eventId: \"04E9E828-EFF3-4144-A875-39AC87179B66\",\r\n    eventType: \"info\",\r\n    userToken: \"User123456\",\r\n    eventDesc: \"Extra Masks\",\r\n    reportedDt: 1592430500012,\r\n    confirms: 3,\r\n    dismisses: 1,\r\n    coordinates: {\r\n      lat: 40.694794,\r\n      lon: -73.981783,\r\n    },\r\n  },\r\n  {\r\n    eventId: \"F176598B-A4E1-4E14-A3A3-6C0E2AAED664\",\r\n    eventType: \"safety\",\r\n    userToken: \"User123456\",\r\n    eventDesc: \"Looting\",\r\n    reportedDt: 1592430500012,\r\n    confirms: 2,\r\n    dismisses: 0,\r\n    coordinates: {\r\n      lat: 40.693257,\r\n      lon: -73.983478,\r\n    },\r\n  },\r\n];\r\n\r\nconst MapView = ({ onMoveEnd, toggleControls, map, setMarkerPosition }) => {\r\n  const history = useHistory();\r\n  const { width, height } = useWindowSize();\r\n  const {\r\n    currentPosition,\r\n    defaultPosition,\r\n    markerPosition,\r\n    showVolumetricBuildings,\r\n    showBasicMapFeatures,\r\n  } = map;\r\n\r\n  const initializeMap = (map) => {\r\n    map.on(\"click\", ({ originalEvent }) => {\r\n      if (!originalEvent.defaultPrevented) {\r\n        setMarkerPosition(null);\r\n        history.push(\"/\");\r\n      }\r\n    });\r\n  };\r\n\r\n  const onItemHover = ({ map }, cursor) => {\r\n    map.getCanvas().style.cursor = cursor;\r\n  };\r\n\r\n  const handleItemClick = useCallback(\r\n    ({\r\n      map,\r\n      feature: {\r\n        properties: { eventId, coordinates },\r\n      },\r\n      originalEvent,\r\n    }) => {\r\n      originalEvent.preventDefault();\r\n      const { lon, lat } = JSON.parse(coordinates);\r\n      map.flyTo({ center: [lon, lat], zoom: 16 });\r\n      toggleControls(true);\r\n      history.push(`/events/${eventId}`);\r\n    },\r\n    [history, toggleControls]\r\n  );\r\n\r\n  const onMouseEvents = useMemo(\r\n    () => ({\r\n      onMouseEnter: (event) => onItemHover(event, \"pointer\"),\r\n      onMouseLeave: (event) => onItemHover(event, \"\"),\r\n      onClick: handleItemClick,\r\n    }),\r\n    [handleItemClick]\r\n  );\r\n\r\n  const handleAddMarker = (map, mapEvent) => {\r\n    if (map.isMoving() || map.isRotating() || map.isZooming()) return;\r\n    const { lat, lng } = mapEvent.lngLat;\r\n    toggleControls(true);\r\n    setMarkerPosition([lng, lat]);\r\n    map.flyTo({ center: [lng, lat], zoom: 16 });\r\n    history.push(\"/submit\");\r\n  };\r\n\r\n  const longPressEvent = useLongPress(handleAddMarker, {\r\n    isPreventDefault: true,\r\n    delay: 500,\r\n  });\r\n\r\n  // const handleMapMoved = (map, mapEvent) => {\r\n  //   // console.log(mapEvent);\r\n  //   /* eslint-disable no-unused-expressions */\r\n  //   mapEvent.originalEvent?.preventDefault?.();\r\n  //   onMoveEnd(map);\r\n  // };\r\n\r\n  return (\r\n    <Mapbox\r\n      style=\"mapbox://styles/rektdeckard/ckayd52rb0xzg1imcbyek0g4y\"\r\n      containerStyle={{\r\n        width,\r\n        height,\r\n      }}\r\n      center={\r\n        currentPosition\r\n          ? [currentPosition.longitude, currentPosition.latitude]\r\n          : defaultPosition\r\n      }\r\n      zoom={MAP_DEFAULTS.defaultZoom}\r\n      onStyleLoad={initializeMap}\r\n      onContextMenu={handleAddMarker}\r\n      // onMoveEnd={handleMapMoved}\r\n      {...longPressEvent}\r\n    >\r\n      <Pin id=\"police\" data={policeIcon} />\r\n      <Pin id=\"pin\" data={pinIcon} />\r\n      <Pin id=\"fire\" data={fireIcon} />\r\n      <Pin id=\"medical\" data={medicalIcon} />\r\n      <Pin id=\"info\" data={infoIcon} />\r\n      <Pin id=\"position\" data={positionIcon} />\r\n\r\n      <MapContext.Consumer>\r\n        {(context) => <MapControls context={context} />}\r\n      </MapContext.Consumer>\r\n\r\n      {showVolumetricBuildings && (\r\n        <Layer\r\n          id=\"3d-buildings\"\r\n          type=\"fill-extrusion\"\r\n          sourceId=\"composite\"\r\n          sourceLayer=\"building\"\r\n          filter={[\"==\", \"extrude\", \"true\"]}\r\n          minZoom={14}\r\n          paint={MAP_DEFAULTS.volumetricPainter}\r\n        />\r\n      )}\r\n      {markerPosition && (\r\n        <Layer\r\n          id=\"map-marker\"\r\n          type=\"symbol\"\r\n          layout={{\r\n            \"icon-image\": \"pin\",\r\n            \"icon-anchor\": \"bottom\",\r\n            \"icon-allow-overlap\": true,\r\n          }}\r\n        >\r\n          <Feature coordinates={markerPosition} />\r\n        </Layer>\r\n      )}\r\n      <Layer\r\n        id=\"event-markers\"\r\n        type=\"symbol\"\r\n        layout={{ \"icon-image\": \"info\", \"icon-allow-overlap\": true }}\r\n        // images={[\"test\", image]}\r\n      >\r\n        {data.map((evt) => {\r\n          const {\r\n            eventId,\r\n            coordinates: { lon, lat },\r\n          } = evt;\r\n          return (\r\n            <Feature\r\n              key={eventId}\r\n              coordinates={[lon, lat]}\r\n              properties={evt}\r\n              {...onMouseEvents}\r\n            />\r\n          );\r\n        })}\r\n      </Layer>\r\n      {currentPosition && (\r\n        <Layer\r\n          id=\"location-marker\"\r\n          type=\"symbol\"\r\n          layout={{ \"icon-image\": \"position\", \"icon-allow-overlap\": true }}\r\n        >\r\n          <Feature\r\n            coordinates={[currentPosition.longitude, currentPosition.latitude]}\r\n            properties={currentPosition}\r\n          />\r\n        </Layer>\r\n      )}\r\n    </Mapbox>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return { map: state.map };\r\n};\r\n\r\nexport default connect(mapStateToProps, { setMarkerPosition })(MapView);\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Segment,\r\n  Menu,\r\n  Search,\r\n  Sidebar,\r\n  Input,\r\n  Button,\r\n} from \"semantic-ui-react\";\r\n\r\nconst TopSheet = ({ visible, toggleControls }) => {\r\n  const [query, setQuery] = useState(\"\");\r\n\r\n  return (\r\n    <Sidebar\r\n      as={Segment}\r\n      inverted\r\n      raised\r\n      direction=\"top\"\r\n      animation=\"push\"\r\n      textAlign=\"center\"\r\n      visible\r\n      style={{ padding: 4 }}\r\n    >\r\n      <Menu inverted borderless widths={3}>\r\n        <Menu.Item> </Menu.Item>\r\n        <Menu.Item fitted>\r\n          <Search\r\n            disabled\r\n            value={query}\r\n            onSearchChange={(event, { value }) => setQuery(value)}\r\n            onFocus={() => toggleControls(false)}\r\n            onBlur={() => toggleControls(true)}\r\n            open={false}\r\n          />\r\n        </Menu.Item>\r\n        <Menu.Menu position=\"right\">\r\n          <Menu.Item>\r\n            <Button circular size=\"large\" color=\"black\" icon=\"setting\" floated=\"right\" />\r\n          </Menu.Item>\r\n        </Menu.Menu>\r\n      </Menu>\r\n    </Sidebar>\r\n  );\r\n};\r\n\r\nexport default TopSheet;\r\n","import React, { Suspense } from \"react\";\r\nimport { withRouter, Switch, Route } from \"react-router-dom\";\r\nimport { Sidebar, Button } from \"semantic-ui-react\";\r\n\r\nimport LoadingPanel from \"./LoadingPanel\";\r\n\r\nconst Loader = <LoadingPanel />;\r\nconst EventList = React.lazy(() => import(\"./EventList\"));\r\nconst EventDetails = React.lazy(() => import(\"./EventDetails\"));\r\nconst EventSubmit = React.lazy(() => import(\"./EventSubmit\"));\r\n\r\nconst BottomSheet = ({ visible }) => {\r\n  // TODO: implement instant submission of high-priotiry SOS event\r\n  const handleSOS = () => window.confirm(\"Send SOS?\");\r\n\r\n  return (\r\n    <Sidebar\r\n      className=\"no-overflow unclickable\"\r\n      animation=\"push\"\r\n      direction=\"bottom\"\r\n      visible={visible}\r\n      style={{ boxShadow: \"none\" }}\r\n    >\r\n      <div style={{ textAlign: \"right\" }}>\r\n        <Button\r\n          className=\"clickable\"\r\n          circular\r\n          compact\r\n          color=\"black\"\r\n          size=\"huge\"\r\n          icon=\"bullhorn\"\r\n          onClick={handleSOS}\r\n        ></Button>\r\n      </div>\r\n      <Switch>\r\n        <Route path=\"/events/:id\">\r\n          <Suspense fallback={Loader}>\r\n            <EventDetails />\r\n          </Suspense>\r\n        </Route>\r\n        <Route exact path=\"/submit\">\r\n          <Suspense fallback={Loader}>\r\n            <EventSubmit />\r\n          </Suspense>\r\n        </Route>\r\n        <Route exact path=\"/sos\">\r\n          <LoadingPanel />\r\n        </Route>\r\n        <Route>\r\n          <Suspense fallback={Loader}>\r\n            <EventList />\r\n          </Suspense>\r\n        </Route>\r\n      </Switch>\r\n    </Sidebar>\r\n  );\r\n};\r\n\r\nexport default withRouter(BottomSheet);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { Sidebar } from \"semantic-ui-react\";\r\n\r\nimport { initializeGeolocation } from \"../actions\";\r\nimport Geolocator from \"./Geolocator\";\r\nimport MapView from \"./MapView\";\r\nimport TopSheet from \"./TopSheet\";\r\nimport BottomSheet from \"./BottomSheet\";\r\n\r\nconst App = ({ shouldUseGeolocation, initializeGeolocation }) => {\r\n  const [controlsVisible, setControlsVisible] = useState(true);\r\n\r\n  useEffect(() => {\r\n    initializeGeolocation();\r\n  }, []);\r\n\r\n  const handleMapMove = (mapEvent) => {\r\n    const { lng: lon, lat } = mapEvent.getCenter();\r\n    // setMapPosition([lon, lat]);\r\n  };\r\n\r\n  const handleMapContextMenu = (mapEvent) => {\r\n    console.log(mapEvent);\r\n  };\r\n\r\n  const handleToggleControls = (visible) => {\r\n    if (typeof visible === \"boolean\") return setControlsVisible(visible);\r\n    setControlsVisible((v) => !v);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {shouldUseGeolocation && <Geolocator />}\r\n      <Sidebar.Pushable className=\"no-overflow\">\r\n        <TopSheet\r\n          visible={controlsVisible}\r\n          toggleControls={handleToggleControls}\r\n        />\r\n        <BottomSheet visible={controlsVisible} />\r\n        <Sidebar.Pusher>\r\n          <MapView\r\n            onMoveEnd={handleMapMove}\r\n            toggleControls={handleToggleControls}\r\n            onContextMenu={handleMapContextMenu}\r\n          />\r\n        </Sidebar.Pusher>\r\n      </Sidebar.Pushable>\r\n    </>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n  return { shouldUseGeolocation: state.map.shouldUseGeolocation };\r\n};\r\n\r\nexport default connect(mapStateToProps, { initializeGeolocation })(App);\r\n","import { FETCH_EVENTS, SET_EVENT_FILTER, UPDATE_EVENT } from \"../actions\";\r\n\r\nconst INITIAL_STATE = {\r\n  dangerClose: false,\r\n  nearbyEvents: [],\r\n  eventFilter: [],\r\n};\r\n\r\nexport default (state = INITIAL_STATE, { type, payload }) => {\r\n  switch (type) {\r\n    case FETCH_EVENTS:\r\n      return {\r\n        ...state,\r\n        nearbyEvents: payload,\r\n      };\r\n    case SET_EVENT_FILTER:\r\n      return {\r\n        ...state,\r\n        eventFilter: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  SET_DEFAULT_POSITION,\r\n  SET_CURRENT_POSITION,\r\n  SET_MARKER_POSITION,\r\n  SET_USE_GEOLOCATION,\r\n} from \"../actions\";\r\n\r\nconst INITIAL_STATE = {\r\n  markerPosition: null,\r\n  currentPosition: null,\r\n  defaultPosition: JSON.parse(localStorage.getItem(SET_DEFAULT_POSITION)) ?? [\r\n    -74.0,\r\n    40.73,\r\n  ],\r\n  shouldUseGeolocation: false,\r\n  showBasicMapFeatures: true,\r\n  showVolumetricBuildings: true,\r\n};\r\n\r\nexport default (state = INITIAL_STATE, { type, payload }) => {\r\n  switch (type) {\r\n    case SET_MARKER_POSITION:\r\n      return {\r\n        ...state,\r\n        markerPosition: payload,\r\n      };\r\n    case SET_CURRENT_POSITION:\r\n      return {\r\n        ...state,\r\n        currentPosition: payload,\r\n      };\r\n    case SET_DEFAULT_POSITION:\r\n      return {\r\n        ...state,\r\n        defaultPosition: payload,\r\n      };\r\n    case SET_USE_GEOLOCATION:\r\n      return {\r\n        ...state,\r\n        shouldUseGeolocation: payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { combineReducers, createStore, applyMiddleware, compose } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\n\r\nimport eventsReducer from \"./eventsReducer\";\r\nimport mapReducer from \"./mapReducer\";\r\n\r\nconst rootReducer = combineReducers({\r\n  events: eventsReducer,\r\n  map: mapReducer,\r\n});\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(\r\n  rootReducer,\r\n  {},\r\n  composeEnhancers(applyMiddleware(thunk))\r\n);\r\n\r\nexport default store;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { BrowserRouter as Router } from \"react-router-dom\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport \"remixicon/fonts/remixicon.css\";\r\nimport \"./index.css\";\r\n\r\nimport App from \"./components/App\";\r\nimport store from \"./reducers\";\r\nimport * as serviceWorker from \"./serviceWorker\";\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <Router>\r\n      <App />\r\n    </Router>\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import axios from \"axios\";\r\n\r\nconst API = axios.create({\r\n  baseURL: \"https://likewater-internal.azurewebsites.net/api\",\r\n});\r\n\r\nexport default API;\r\n"],"sourceRoot":""}