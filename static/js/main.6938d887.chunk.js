(this.webpackJsonplikewater=this.webpackJsonplikewater||[]).push([[0],{179:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var a=n(0),r=function(e){(function(e){return!!e.touches})(e)&&(console.log("useLongPress: preventing default"),e.touches.length<2&&e.preventDefault&&e.preventDefault&&e.preventDefault())},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isPreventDefault,o=void 0===n||n,i=t.delay,c=void 0===i?500:i,l=Object(a.useRef)(),s=Object(a.useRef)(),u=Object(a.useCallback)((function(t,n){var a,i=n.originalEvent;o&&i.target&&(i.target.addEventListener("touchend",r,{passive:!0}),s.current=i.target),(null===i||void 0===i||null===(a=i.touches)||void 0===a?void 0:a.length)<2&&(l.current=setTimeout((function(){e(t,n)}),c))}),[e,c]),d=Object(a.useCallback)((function(e,t){l.current&&clearTimeout(l.current),o&&s.current&&s.current.removeEventListener("touchend",r)}),[]);return{onTouchStart:u,onTouchEnd:d}},i=n(22),c=function(e){return e.map((function(e){var t=e.eventId,n=e.eventType,a=e.eventDesc,r=e.coordinates,o=e.reportedDt;return Object(i.a)({eventId:t,eventType:n,coordinates:r,eventDesc:a,reportedDt:o},function(e){switch(e){case"aid":return{icon:"first-aid-kit-fill",color:"floralwhite"};case"emergency":return{icon:"emergency",color:"crimson"};case"info":return{icon:"bullhorn",color:"forestgreen"};case"police":return{icon:"alarm-warning",color:"royalblue"};case"safety":return{icon:"fire",color:"darkorange"};default:return{icon:"map pin",color:"darkmagenta"}}}("police"))}))}},182:function(e,t,n){e.exports=n.p+"static/media/pushpin-2-fill.466aaf39.svg"},183:function(e,t,n){e.exports=n.p+"static/media/alarm-warning-fill.129f3113.svg"},184:function(e,t,n){e.exports=n.p+"static/media/fire-fill.feb2802d.svg"},185:function(e,t,n){e.exports=n.p+"static/media/first-aid-kit-fill.f96d703e.svg"},186:function(e,t,n){e.exports=n.p+"static/media/broadcast-fill.d068d7ab.svg"},187:function(e,t,n){e.exports=n.p+"static/media/focus-3-line.ec68912f.svg"},209:function(e,t,n){e.exports=n(372)},220:function(e,t,n){},372:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(29),i=n.n(o),c=n(48),l=n(77),s=(n(218),n(219),n(220),n(49)),u=n(382),d=n(386),m=n(15),f=n(385),p=n(19),v=n(179),b=(n(41),n(79),n(80),n(182)),g=n.n(b),h=n(183),E=n.n(h),y=n(184),O=n.n(y),k=n(185),j=n.n(k),w=n(186),x=n.n(w),P=n(187),_=n.n(P),I=Object(p.d)({accessToken:"pk.eyJ1IjoicmVrdGRlY2thcmQiLCJhIjoiY2theWJ4OXM0MGhiejJ3cnkzcmk0andiYyJ9.IinlG0vyUvcWhvlAREJXeA",attributionControl:!1}),C=new Image(24,24);C.src=g.a;var D=new Image(24,24);D.src=E.a;var M=new Image(24,24);M.src=O.a;var S=new Image(24,24);S.src=j.a;var T=new Image(24,24);T.src=x.a;var J=new Image(24,24);J.src=_.a;var L,z={defaultZoom:[10],volumetricPainter:{"fill-extrusion-color":"#424d5c","fill-extrusion-height":{type:"identity",property:"height"},"fill-extrusion-base":{type:"identity",property:"min_height"},"fill-extrusion-opacity":.6}},R=[{eventId:"3A4221E1-9AD7-4296-863D-3B8F56E092C7",eventType:"Riots",userToken:"123423",eventDesc:"Example Riot Event",coordinates:{lat:40.73663,lon:-73.99973},reportedDt:"12345",confirms:0,dismisses:0}],A=Object(c.b)((function(e){return{map:e.map}}),{setMarkerPosition:function(e){return{type:"set_marker_position",payload:e}}})((function(e){e.onMoveEnd;var t=e.toggleControls,n=e.map,o=e.setMarkerPosition,i=Object(m.f)(),c=Object(f.a)(),l=c.width,s=c.height,u=n.currentPosition,d=n.defaultPosition,b=n.markerPosition,g=n.showVolumetricBuildings,h=(n.showBasicMapFeatures,function(e,t){e.map.getCanvas().style.cursor=t}),E=Object(a.useCallback)((function(e){var n=e.map,a=e.feature.properties,r=a.eventId,o=a.coordinates;e.originalEvent.preventDefault();var c=JSON.parse(o),l=c.lon,s=c.lat;n.flyTo({center:[l,s],zoom:16}),t(!0),i.push("/events/".concat(r))}),[i,t]),y=Object(a.useMemo)((function(){return{onMouseEnter:function(e){return h(e,"pointer")},onMouseLeave:function(e){return h(e,"")},onClick:E}}),[E]),O=function(e,n){if(!(e.isMoving()||e.isRotating()||e.isZooming())){var a=n.lngLat,r=a.lat,c=a.lng;t(!0),o([c,r]),e.flyTo({center:[c,r],zoom:16}),i.push("/submit")}},k=Object(v.b)(O,{isPreventDefault:!0,delay:500});return r.a.createElement(I,Object.assign({style:"mapbox://styles/rektdeckard/ckayd52rb0xzg1imcbyek0g4y",center:u?[u.longitude,u.latitude]:d,zoom:z.defaultZoom,containerStyle:{width:l,height:s},onStyleLoad:function(e){e.on("click",(function(e){e.originalEvent.defaultPrevented||(o(null),i.push("/"))}))},onContextMenu:O},k),r.a.createElement(p.b,{id:"police",data:D}),r.a.createElement(p.b,{id:"pin",data:C}),r.a.createElement(p.b,{id:"fire",data:M}),r.a.createElement(p.b,{id:"medical",data:S}),r.a.createElement(p.b,{id:"info",data:T}),r.a.createElement(p.b,{id:"position",data:J}),g&&r.a.createElement(p.c,{id:"3d-buildings",type:"fill-extrusion",sourceId:"composite",sourceLayer:"building",filter:["==","extrude","true"],minZoom:14,paint:z.volumetricPainter}),b&&r.a.createElement(p.c,{id:"map-marker",type:"symbol",layout:{"icon-image":"pin","icon-anchor":"bottom","icon-allow-overlap":!0}},r.a.createElement(p.a,{coordinates:b})),r.a.createElement(p.c,{id:"event-markers",type:"symbol",layout:{"icon-image":"info","icon-allow-overlap":!0}},R.map((function(e){var t=e.eventId,n=e.coordinates,a=n.lon,o=n.lat;return r.a.createElement(p.a,Object.assign({key:t,coordinates:[a,o],properties:e},y))}))),u&&r.a.createElement(p.c,{id:"location-marker",type:"symbol",layout:{"icon-image":"position","icon-allow-overlap":!0}},r.a.createElement(p.a,{coordinates:[u.longitude,u.latitude],properties:u})))})),B=n(374),F=n(384),N=function(e){e.visible;var t=Object(a.useState)(""),n=Object(s.a)(t,2),o=n[0],i=n[1];return r.a.createElement(d.a,{as:B.a,inverted:!0,raised:!0,direction:"top",animation:"push",textAlign:"center",visible:!0},r.a.createElement(F.a,{value:o,onSearchChange:function(e,t){var n=t.value;return i(n)},open:!1}))},V=n(83),W=r.a.createElement(V.a,null),X=r.a.lazy((function(){return n.e(4).then(n.bind(null,433))})),Z=r.a.lazy((function(){return Promise.all([n.e(3),n.e(6)]).then(n.bind(null,432))})),G=r.a.lazy((function(){return n.e(5).then(n.bind(null,435))})),U=Object(m.g)((function(e){var t=e.visible;return r.a.createElement(d.a,{className:"no-overflow",animation:"push",direction:"bottom",visible:t},r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/"},r.a.createElement(a.Suspense,{fallback:W},r.a.createElement(X,null))),r.a.createElement(m.a,{path:"/events/:id"},r.a.createElement(a.Suspense,{fallback:W},r.a.createElement(Z,null))),r.a.createElement(m.a,{exact:!0,path:"/submit"},r.a.createElement(a.Suspense,{fallback:W},r.a.createElement(G,null))),r.a.createElement(m.a,{exact:!0,path:"/report"},r.a.createElement(V.a,null)),r.a.createElement(m.a,{exact:!0,path:"/sos"},r.a.createElement(V.a,null))))})),Y=Object(c.b)(null,{setCurrentPosition:function(e){return{type:"set_current_position",payload:e}}})((function(e){var t=e.setCurrentPosition,n=Object(u.a)({enableHighAccuracy:!1,maximumAge:15e3,timeout:3e4});Object(a.useEffect)((function(){!n.loading&&n.longitude&&t(n)}),[n,t]);var o=Object(a.useState)(!0),i=Object(s.a)(o,2),c=i[0],l=i[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a.Pushable,{className:"no-overflow"},r.a.createElement(N,{visible:c}),r.a.createElement(U,{visible:c}),r.a.createElement(d.a.Pusher,null,r.a.createElement(A,{onMoveEnd:function(e){var t=e.getCenter();t.lng,t.lat},toggleControls:function(e){if("boolean"===typeof e)return l(e);l((function(e){return!e}))},onContextMenu:function(e){console.log(e)}}))))})),H=n(40),Q=n(198),$=n(22),q={dangerClose:!1,nearbyEvents:[],eventFilter:[]},K={markerPosition:null,currentPosition:null,defaultPosition:null!==(L=JSON.parse(localStorage.getItem("update_default_position")))&&void 0!==L?L:[-74,40.73],showBasicMapFeatures:!0,showVolumetricBuildings:!0},ee=Object(H.c)({events:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"fetch_events":return Object($.a)(Object($.a)({},e),{},{nearbyEvents:a});case"update_event_filter":return Object($.a)(Object($.a)({},e),{},{eventFilter:a});default:return e}},map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"set_marker_position":return Object($.a)(Object($.a)({},e),{},{markerPosition:a});case"set_current_position":return Object($.a)(Object($.a)({},e),{},{currentPosition:a});case"update_default_position":return Object($.a)(Object($.a)({},e),{},{defaultPosition:a});default:return e}}}),te=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||H.d,ne=Object(H.e)(ee,{},te(Object(H.a)(Q.a)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(c.a,{store:ne},r.a.createElement(l.a,null,r.a.createElement(Y,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},80:function(e,t,n){"use strict";var a=n(181),r=n.n(a).a.create({baseURL:"https://likewater-internal.azurewebsites.net/api"});t.a=r},83:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(374),i=n(373);t.a=function(){return r.a.createElement(o.a,{raised:!0,inverted:!0,style:{padding:8,height:292}},r.a.createElement("div",{style:{height:"100%",display:"flex",alignItems:"center"}},r.a.createElement(i.a,{active:!0,inline:"centered"})))}}},[[209,1,2]]]);
//# sourceMappingURL=main.6938d887.chunk.js.map